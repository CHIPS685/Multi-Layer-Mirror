(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82152,59187,95356,e=>{"use strict";var i=e.i(43476);function a(e){return(0,i.jsx)("div",{style:{border:"1px solid rgba(0,0,0,0.12)",borderRadius:16,padding:14,background:"white",...e.style},children:e.children})}function s(e){return(0,i.jsxs)("div",{style:{display:"grid",gap:6},children:[(0,i.jsx)("div",{style:{fontSize:12,opacity:.75},children:e.label}),e.children]})}function t(e){return(0,i.jsxs)("div",{style:{padding:14,borderRadius:16,border:"1px dashed rgba(0,0,0,0.18)"},children:[(0,i.jsx)("div",{style:{fontWeight:700},children:e.title}),(0,i.jsx)("div",{style:{marginTop:6,opacity:.8},children:e.description})]})}e.s(["default",()=>a],82152),e.s(["default",()=>s],59187),e.s(["default",()=>t],95356)},6748,e=>{"use strict";var i=e.i(43476),a=e.i(71645);e.i(36180);var s=e.i(98925),t=e.i(82152),r=e.i(59187),d=e.i(95356),l=e.i(29371),n=e.i(47392);function c(){let[e,c]=(0,a.useState)(""),[o,u]=(0,a.useState)((0,n.todayDateId)()),[m,h]=(0,a.useState)(""),[g,x]=(0,a.useState)("idle"),[p,v]=(0,a.useState)(""),[b,j]=(0,a.useState)(!1),[y,f]=(0,a.useState)("");(0,a.useEffect)(()=>{(0,l.ensureSignedIn)().then(c).catch(e=>{v(e?.message||"ログインに失敗しました"),x("error")})},[]);let S=(0,a.useMemo)(()=>{if(!e)return!1;try{return(0,n.normalizeDateId)(o),m.trim().length>0}catch{return!1}},[e,o,m]);async function T(){if(v(""),S){x("saving");try{let i=(0,n.normalizeDateId)(o),a=(0,s.collection)(l.db,`users/${e}/fragments`);await (0,s.addDoc)(a,{dateId:i,text:m.trim(),createdAt:(0,s.serverTimestamp)()}),h(""),x("saved"),setTimeout(()=>x("idle"),600)}catch(e){v(e?.message||"保存に失敗しました"),x("error")}}}return(0,i.jsxs)("div",{className:"mlm-page",children:[(0,i.jsx)("header",{className:"mlm-homeHeader",children:(0,i.jsx)("div",{className:"mlm-homeHeaderRow",children:(0,i.jsxs)("div",{className:"mlm-homeTitle",children:[(0,i.jsx)("div",{className:"mlm-avatar"}),(0,i.jsx)("div",{className:"mlm-titleText",children:"私の日記記録"})]})})}),(0,i.jsx)("main",{className:"mlm-pageBody",children:(0,i.jsx)("div",{className:"mlm-container",children:(0,i.jsx)("div",{className:"mlm-card mlm-panel",children:(0,i.jsxs)("div",{style:{marginTop:16,display:"grid",gap:12},children:[(0,i.jsx)(t.default,{children:(0,i.jsxs)("div",{style:{display:"grid",gap:12},children:[(0,i.jsx)(r.default,{label:"dateId(YYYY-MM-DD)",children:(0,i.jsx)("input",{value:o,onChange:e=>u(e.target.value),style:{width:"100%",padding:10,borderRadius:10,border:"1px solid rgba(0,0,0,0.18)"}})}),(0,i.jsx)(r.default,{label:"fragment",children:(0,i.jsx)("textarea",{value:m,onChange:e=>h(e.target.value),rows:6,style:{width:"100%",padding:10,borderRadius:10,border:"1px solid rgba(0,0,0,0.18)",resize:"vertical"},placeholder:"断片を書いて保存"})}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,i.jsx)("button",{onClick:T,disabled:!S||"saving"===g,style:{padding:"10px 14px",borderRadius:12,border:"1px solid rgba(0,0,0,0.18)",background:S&&"saving"!==g?"black":"rgba(0,0,0,0.06)",color:S&&"saving"!==g?"white":"rgba(0,0,0,0.55)",cursor:S&&"saving"!==g?"pointer":"not-allowed"},children:"保存"}),(0,i.jsx)("div",{style:{fontSize:12,opacity:.8},children:"saving"===g?"保存中…":"saved"===g?"保存しました":"error"===g?"失敗":""})]}),p?(0,i.jsx)("div",{style:{color:"crimson",fontSize:12},children:p}):null]})}),e?null:(0,i.jsx)(d.default,{title:"ログイン準備中",description:"匿名ログイン完了後に保存できます"})]})})})})]})}e.s(["default",()=>c])}]);